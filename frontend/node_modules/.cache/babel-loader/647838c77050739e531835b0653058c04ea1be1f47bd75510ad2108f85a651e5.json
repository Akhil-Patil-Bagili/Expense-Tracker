{"ast":null,"code":"import React,{useState,useContext}from\"react\";import{FaUser,FaEnvelope,FaLock}from\"react-icons/fa\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../App\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Form(_ref){let{showNameField,setShowNameField,setTitle}=_ref;const{setUser}=useContext(AuthContext);const navigate=useNavigate();const[formData,setFormData]=useState({username:\"\",email:\"\",password:\"\"});const{username,email,password}=formData;const[error,setError]=useState(null);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prevData=>({...prevData,[name]:value}));setError(null);// Reset the error state whenever there's a change in input\n};const handleSignUp=async e=>{e.preventDefault();try{const response=await fetch(\"${process.env.REACT_APP_API_URL}/api/register/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)});if(response.ok){alert(\"User signed up successfully! You can now log in.\");setFormData({username:\"\",email:\"\",password:\"\"});setShowNameField(false);setTitle(\"Sign In\");}else{const data=await response.json();setError(\"Failed to sign up. Error: \".concat(data.detail));}}catch(error){console.error(\"Error:\",error);setError(\"Failed to sign up. Please try again.\");}};const handleSignIn=async e=>{e.preventDefault();try{const response=await fetch(\"${process.env.REACT_APP_API_URL}/api/login/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,password:password})});if(response.ok){const data=await response.json();localStorage.setItem(\"access\",data.access);setUser(username);navigate(\"/dashboard\");}else{const data=await response.json();setError(\"Failed to sign in.   Error: \".concat(data.error));}}catch(error){console.error(\"Error:\",error);setError(\"Failed to sign in. Please try again.\");}};return/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:showNameField?handleSignUp:handleSignIn,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(FaUser,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username\",value:username,onChange:handleInputChange,required:true})]}),showNameField&&/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(FaEnvelope,{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:email,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(FaLock,{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:password,onChange:handleInputChange,required:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-field\",style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:showNameField?\"Sign Up\":\"Sign In\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-field\",style:{marginTop:\"20px\",display:\"flex\",justifyContent:\"center\"},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowNameField(true);setTitle(\"Sign Up\");},className:showNameField?\"active\":\"disable\",style:{marginRight:\"10px\"},children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowNameField(false);setTitle(\"Sign In\");},className:!showNameField?\"active\":\"disable\",children:\"Sign In\"})]})]});}export default Form;","map":{"version":3,"names":["React","useState","useContext","FaUser","FaEnvelope","FaLock","useNavigate","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Form","_ref","showNameField","setShowNameField","setTitle","setUser","navigate","formData","setFormData","username","email","password","error","setError","handleInputChange","e","name","value","target","prevData","handleSignUp","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","alert","data","json","concat","detail","console","handleSignIn","localStorage","setItem","access","children","className","onSubmit","type","placeholder","onChange","required","style","display","justifyContent","marginTop","onClick","marginRight"],"sources":["/Users/akhilpatilbagili/Documents/Bootcamp/Expense_Tracker/frontend/src/Components/Form.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { FaUser, FaEnvelope, FaLock } from \"react-icons/fa\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../App\";\n\nfunction Form({ showNameField, setShowNameField, setTitle }) {\n  const { setUser } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const [formData, setFormData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\"\n  });\n\n  const { username, email, password } = formData;\n  const [error, setError] = useState(null);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevData) => ({ ...prevData, [name]: value }));\n    setError(null); // Reset the error state whenever there's a change in input\n  };\n\n  const handleSignUp = async (e) => {\n    e.preventDefault();\n\n    try {\n      const response = await fetch(\"${process.env.REACT_APP_API_URL}/api/register/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(formData),\n      });\n\n      if (response.ok) {\n        alert(\"User signed up successfully! You can now log in.\");\n        setFormData({ username: \"\", email: \"\", password: \"\" });\n        setShowNameField(false);\n        setTitle(\"Sign In\");\n      } else {\n        const data = await response.json();\n        setError(`Failed to sign up. Error: ${data.detail}`);\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      setError(\"Failed to sign up. Please try again.\");\n    }\n  };\n\n  const handleSignIn = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await fetch(\"${process.env.REACT_APP_API_URL}/api/login/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          username: username,\n          password: password,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        localStorage.setItem(\"access\", data.access);\n        setUser(username);\n        navigate(\"/dashboard\");\n      } else {\n        const data = await response.json();\n        setError(`Failed to sign in.   Error: ${data.error}`);\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      setError(\"Failed to sign in. Please try again.\");\n    }\n  };\n\n  return (\n    <>\n      {error && <p className=\"error-message\">{error}</p>}\n      <form onSubmit={showNameField ? handleSignUp : handleSignIn}>\n        <div className=\"input-group\">\n          <div className=\"input-field\">\n            <FaUser />\n            <input\n              type=\"text\"\n              name=\"username\"\n              placeholder=\"Username\"\n              value={username}\n              onChange={handleInputChange}\n              required\n            />\n          </div>\n\n          {showNameField && (\n            <div className=\"input-field\">\n              <FaEnvelope />\n              <input\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Email\"\n                value={email}\n                onChange={handleInputChange}\n                required\n              />\n            </div>\n          )}\n\n          <div className=\"input-field\">\n            <FaLock />\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={handleInputChange}\n              required\n            />\n          </div>\n        </div>\n        <div className=\"btn-field\" style={{ display: \"flex\", justifyContent: \"center\" }}>\n          <button type=\"submit\">\n            {showNameField ? \"Sign Up\" : \"Sign In\"}\n          </button>\n        </div>\n      </form>\n\n      <div className=\"btn-field\" style={{ marginTop: \"20px\", display: \"flex\", justifyContent: \"center\" }}>\n        <button \n          type=\"button\" \n          onClick={() => { setShowNameField(true); setTitle(\"Sign Up\"); }}\n          className={showNameField ? \"active\" : \"disable\"} \n          style={{ marginRight: \"10px\" }}\n        >\n          Sign Up\n        </button>\n        <button \n          type=\"button\" \n          onClick={() => { setShowNameField(false); setTitle(\"Sign In\"); }}\n          className={!showNameField ? \"active\" : \"disable\"}\n        >\n          Sign In\n        </button>\n      </div>\n    </>\n  );\n}\n\nexport default Form;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}